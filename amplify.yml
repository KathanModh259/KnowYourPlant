version: 1
applications:
  - frontend:
      phases:
        preBuild:
          commands:
            - npm install -g pnpm
        build:
          commands:
            - echo "Building Frontend..."
            - cd plant-scanner/frontend
            - npm install
            - npm run build
            - cd ../..
            - echo "Moving dist to root..."
            - rm -rf dist
            - mv plant-scanner/frontend/dist dist
            - echo "Listing root dist:"
            - ls -la dist
      artifacts:
        baseDirectory: dist
        files:
          - '**/*'
      cache:
        paths:
          - plant-scanner/frontend/node_modules/**/*
